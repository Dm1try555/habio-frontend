<template>
  <div class="demo-page">
    <header class="demo-header">
      <h1>HABIO-CHAT Demo</h1>
      <p>–£–º–Ω—ã–π –≤–∏–¥–∂–µ—Ç —Å–≤—è–∑–∏ —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º —Ä–æ—É—Ç–∏–Ω–≥–æ–º –∫–∞–Ω–∞–ª–æ–≤</p>
    </header>

    <main class="demo-content">
      <section class="demo-section">
        <h2>–û –ø—Ä–æ–¥—É–∫—Ç–µ</h2>
        <p>
          HABIO-CHAT - —ç—Ç–æ –µ–¥–∏–Ω—ã–π –≤–∏–¥–∂–µ—Ç "–ö–Ω–æ–ø–∫–∞ —Å–≤—è–∑–∏", –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é 
          –Ω–∞–∏–±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ 
          –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.
        </p>
      </section>

      <section class="demo-section">
        <h2>–ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</h2>
        <div class="features-grid">
          <div class="feature-card">
            <h3>üïê –£–º–Ω—ã–π —Ä–æ—É—Ç–∏–Ω–≥</h3>
            <p>–ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫–∞–Ω–∞–ª–æ–≤ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã –∏ —Ç–∏–ø—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</p>
          </div>
          <div class="feature-card">
            <h3>üì± –ú—É–ª—å—Ç–∏–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å</h3>
            <p>–†–∞–∑–Ω—ã–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –∏ –¥–µ—Å–∫—Ç–æ–ø–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤</p>
          </div>
          <div class="feature-card">
            <h3>üß† –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å</h3>
            <p>–ó–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞</p>
          </div>
          <div class="feature-card">
            <h3>üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h3>
            <p>–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–π –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π</p>
          </div>
        </div>
      </section>

      <section class="demo-section">
        <h2>–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–∏–¥–∂–µ—Ç–∞</h2>
        <p>
          –í–∏–¥–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã. 
          –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –µ–≥–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–∞–Ω–∞–ª—ã —Å–≤—è–∑–∏.
        </p>
        <div class="demo-info">
          <h3>–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:</h3>
          <ul>
            <li>–í—Ä–µ–º—è: {{ currentTime }}</li>
            <li>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: {{ deviceType }}</li>
            <li>–°—Ç–∞—Ç—É—Å: {{ isOnline ? '–û–Ω–ª–∞–π–Ω' : '–û—Ñ–ª–∞–π–Ω' }}</li>
          </ul>
        </div>
      </section>

      <section class="demo-section">
        <h2>API Endpoints</h2>
        <div class="api-endpoints">
          <div class="endpoint">
            <code>GET /api/widget/{project_id}/channels/</code>
            <span>–ü–æ–ª—É—á–∏—Ç—å –∫–∞–Ω–∞–ª—ã –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞</span>
          </div>
          <div class="endpoint">
            <code>POST /api/widget/{project_id}/create_lead/</code>
            <span>–°–æ–∑–¥–∞—Ç—å –ª–∏–¥</span>
          </div>
          <div class="endpoint">
            <code>POST /api/widget/{project_id}/create_callback/</code>
            <span>–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –∑–≤–æ–Ω–æ–∫</span>
          </div>
        </div>
      </section>
    </main>

    <!-- Habio Widget -->
    <HabioWidget 
      :project-id="projectId" 
      :api-base="apiBase"
    />
  </div>
</template>

<script setup>
import { ref, computed, onMounted } from 'vue'

const projectId = ref('1')
const apiBase = ref('http://127.0.0.1:8000/api')
const currentTime = ref('')
const deviceType = ref('desktop')
const isOnline = ref(false)

const updateTime = () => {
  const now = new Date()
  currentTime.value = now.toLocaleString('ru-RU', {
    weekday: 'long',
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  })
}

const detectDevice = () => {
  deviceType.value = window.innerWidth < 768 ? 'mobile' : 'desktop'
}

onMounted(() => {
  updateTime()
  detectDevice()
  
  // Update time every minute
  setInterval(updateTime, 60000)
  
  // Update device type on resize
  window.addEventListener('resize', detectDevice)
})
</script>

<style scoped>
.demo-page {
  min-height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.demo-header {
  text-align: center;
  padding: 60px 20px 40px;
}

.demo-header h1 {
  font-size: 3rem;
  margin: 0 0 16px 0;
  font-weight: 700;
}

.demo-header p {
  font-size: 1.2rem;
  opacity: 0.9;
  margin: 0;
}

.demo-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px 60px;
}

.demo-section {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  padding: 32px;
  margin-bottom: 32px;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.demo-section h2 {
  font-size: 2rem;
  margin: 0 0 20px 0;
  font-weight: 600;
}

.demo-section p {
  font-size: 1.1rem;
  line-height: 1.6;
  margin: 0 0 20px 0;
  opacity: 0.9;
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin-top: 24px;
}

.feature-card {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  padding: 24px;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.feature-card h3 {
  font-size: 1.3rem;
  margin: 0 0 12px 0;
  font-weight: 600;
}

.feature-card p {
  font-size: 1rem;
  margin: 0;
  opacity: 0.8;
}

.demo-info {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  padding: 20px;
  margin-top: 20px;
}

.demo-info h3 {
  margin: 0 0 12px 0;
  font-size: 1.2rem;
}

.demo-info ul {
  margin: 0;
  padding-left: 20px;
}

.demo-info li {
  margin-bottom: 8px;
  opacity: 0.9;
}

.api-endpoints {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 20px;
}

.endpoint {
  display: flex;
  align-items: center;
  gap: 16px;
  background: rgba(255, 255, 255, 0.1);
  padding: 12px 16px;
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.endpoint code {
  background: rgba(0, 0, 0, 0.3);
  padding: 4px 8px;
  border-radius: 4px;
  font-family: 'Monaco', 'Menlo', monospace;
  font-size: 0.9rem;
  min-width: 200px;
}

.endpoint span {
  opacity: 0.8;
  font-size: 0.9rem;
}

@media (max-width: 768px) {
  .demo-header h1 {
    font-size: 2rem;
  }
  
  .demo-header p {
    font-size: 1rem;
  }
  
  .demo-section {
    padding: 20px;
  }
  
  .features-grid {
    grid-template-columns: 1fr;
  }
  
  .endpoint {
    flex-direction: column;
    align-items: flex-start;
  }
  
  .endpoint code {
    min-width: auto;
    width: 100%;
  }
}
</style>